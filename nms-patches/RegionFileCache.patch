--- a/net/minecraft/server/RegionFileCache.java
+++ b/net/minecraft/server/RegionFileCache.java
@@ -18,7 +18,13 @@
         this.a = file;
     }
 
-    private RegionFile a(ChunkCoordIntPair chunkcoordintpair) throws IOException {
+    // CraftBukkit start
+    // cannot make a() public, signature conflict
+    public final RegionFile getRegionFile(ChunkCoordIntPair chunkcoordintpair, boolean existingOnly) throws IOException {
+        return this.a(chunkcoordintpair, existingOnly);
+    }
+    // CraftBukkit end
+    private RegionFile a(ChunkCoordIntPair chunkcoordintpair, boolean existingOnly) throws IOException { // CraftBukkit
         long i = ChunkCoordIntPair.pair(chunkcoordintpair.getRegionX(), chunkcoordintpair.getRegionZ());
         RegionFile regionfile = (RegionFile) this.cache.getAndMoveToFirst(i);
 
@@ -34,6 +40,7 @@
             }
 
             File file = new File(this.a, "r." + chunkcoordintpair.getRegionX() + "." + chunkcoordintpair.getRegionZ() + ".mca");
+            if (existingOnly && !file.exists()) return null; // CraftBukkit
             RegionFile regionfile1 = new RegionFile(file);
 
             this.cache.putAndMoveToFirst(i, regionfile1);
@@ -43,7 +50,7 @@
 
     @Nullable
     public NBTTagCompound read(ChunkCoordIntPair chunkcoordintpair) throws IOException {
-        RegionFile regionfile = this.a(chunkcoordintpair);
+        RegionFile regionfile = this.a(chunkcoordintpair, false); // CraftBukkit
         DataInputStream datainputstream = regionfile.a(chunkcoordintpair);
         Throwable throwable = null;
 
@@ -78,7 +85,7 @@
     }
 
     protected void write(ChunkCoordIntPair chunkcoordintpair, NBTTagCompound nbttagcompound) throws IOException {
-        RegionFile regionfile = this.a(chunkcoordintpair);
+        RegionFile regionfile = this.a(chunkcoordintpair, false); // CraftBukkit
         DataOutputStream dataoutputstream = regionfile.c(chunkcoordintpair);
         Throwable throwable = null;
 
@@ -97,6 +104,7 @@
                     }
                 } else {
                     dataoutputstream.close();
+                    regionfile.setStatus(chunkcoordintpair.x, chunkcoordintpair.z, ChunkRegionLoader.getStatus(nbttagcompound)); // CraftBukkit - cache status on disk (ensure AFTER close, which is the write to the region file)
                 }
             }
 
@@ -114,4 +122,12 @@
         }
 
     }
+
+    // CraftBukkit start
+    public boolean chunkExists(ChunkCoordIntPair pos) throws IOException {
+        RegionFile regionfile = a(pos, true);
+
+        return regionfile != null ? regionfile.d(pos) : false;
+    }
+    // CraftBukkit end
 }
